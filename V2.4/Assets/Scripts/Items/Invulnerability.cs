/*
  Invulnerability
  
  Will Chapman
  18/07/2018
  
  Invulnerability inherits from Items and describes, a star that will make the player invincible
  
*/

//Using
using UnityEngine;

/// <summary>
/// Describes behaviour for collectables
/// </summary>
public class Invulnerability : Item
{
    /// <summary>
    /// Defines collectable when instantiated
    /// </summary>
    /// <param name="name">Name of the collectable</param>
    /// <param name="description">Description of the collectable</param>
    protected Invulnerability(string name, string description)
        : base("Collectible " + name, description, ItemType.Collectables)
    {
    }
    
    
    /// <summary>
    /// Overrides the update method of the Item, so that Unity's monobehaviour runs this
    /// </summary>
    public override void Update()
    {
        //Rotates every update
        transform.Rotate(new Vector3(0, 0, 5000) * Time.deltaTime);
    }

    /// <summary>
    /// Overriding method to describe behaviour on collectable pickup
    /// </summary>
    /// <param name="player">Player object</param>
    public override void OnPickup(GameObject player)
    {
        if (player != null && player.GetComponent<PlayerMain>()!=null)
        {
            Debug.Log("Player picked up collectable");
            //TODO: add some sort of ding sound effect
            player.GetComponent<PlayerMain>().MakeImmortal();
            
            gameObject.SetActive(false);
        }
    }
}